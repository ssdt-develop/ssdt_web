import{cN as e,cO as l,r as t,D as a,K as i,c as s,l as o,w as u,a3 as r,g as d,ao as p,e as n,k as f,ab as c,a2 as y,t as m,bY as v,at as h}from"./index.BRpw1nKc.js";import{E as g}from"./el-dialog._ZabjypL.js";import{E as _}from"./el-row.q_U4h3Z4.js";import{E as w}from"./el-text.D8Jxf6kI.js";import{E as k}from"./el-col.CaebfPGa.js";import{E as z}from"./el-avatar.ByAhWF37.js";import{E as T}from"./el-image-viewer.BB7HyzD-.js";import{_ as b}from"./index.CwjPZbsy.js";import{F as j}from"./index.B5yjKjmX.js";const x={key:0},B=["src"],S=["data"],E=["src"],V=["src"],U=["src"],C={key:3},F={key:4},N={key:1},K={__name:"FileImage",props:e({fileType:{type:String,default:"image"},fileTitle:{type:String,default:"上传图片"},fileTip:{type:String,default:"图片小于200KB，jpg、png格式。"},height:{type:Number,default:30},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},previewTeleported:{type:Boolean,default:!0},uploadBtn:{type:String,default:"上传"},deleteBtn:{type:String,default:"删除"},avatar:{type:Boolean,default:!1},upload:{type:Boolean,default:!1}},{modelValue:{type:Number,default:0},modelModifiers:{},fileUrl:{type:String,default:""},fileUrlModifiers:{}}),emits:["update:modelValue","update:fileUrl"],setup(e){const K=l(e,"modelValue"),M=l(e,"fileUrl"),A=e,D=t(24),I=t(0),O=t(!1),R=a((()=>({height:A.height+"px"}))),Y=a((()=>({height:A.height+"px"}))),q=a((()=>({height:A.height+"px"}))),G=a((()=>({width:"90%"}))),H=a((()=>.7*A.height+"px"));function J(){O.value=!1}function L(e){O.value=!1;const l=e.length;if(l){const t=l-1;K.value=e[t].file_id,M.value=e[t].file_url}}return i([()=>A.avatar,()=>A.upload],(([e,l])=>{e&&(Y.value.width=A.height+"px",Y.value.borderRadius="50%"),l&&(D.value=12,I.value=12)}),{immediate:!0}),(l,t)=>{const a=b,i=T,A=z,P=k,Q=h,W=w,X=_,Z=g;return s(),o(X,{style:{width:"100%"}},{default:u((()=>[r(P,{span:d(D),style:p(d(R))},{default:u((()=>[M.value?(s(),n("div",x,["image"===e.fileType?(s(),o(i,{key:0,style:p(d(Y)),src:M.value,fit:e.fit,"preview-src-list":[M.value],"preview-teleported":e.previewTeleported,lazy:e.lazy,title:"点击看大图"},{error:u((()=>[r(a,{"icon-class":"picture"})])),_:1},8,["style","src","fit","preview-src-list","preview-teleported","lazy"])):"video"===e.fileType?(s(),n("video",{key:1,style:p(d(q)),controls:""},[f("source",{src:M.value,type:"video/mp4"},null,8,B),f("object",{data:M.value,style:p(d(q))},[f("embed",{src:M.value,style:p(d(q))},null,12,E)],12,S)],4)):"audio"===e.fileType?(s(),n("audio",{key:2,style:p(d(G)),controls:""},[f("source",{src:M.value,type:"audio/mp3"},null,8,V),f("embed",{src:M.value,style:p(d(G))},null,12,U)],4)):"word"===e.fileType?(s(),n("div",C,[r(a,{"icon-class":"document",size:d(H)},null,8,["size"])])):"other"===e.fileType?(s(),n("div",F,[r(a,{"icon-class":"folder",size:d(H)},null,8,["size"])])):c("",!0)])):(s(),n("div",N,[e.avatar?(s(),o(A,{key:0,size:e.height},{default:u((()=>[r(a,{"icon-class":"user-filled",size:d(H)},null,8,["size"])])),_:1},8,["size"])):c("",!0)]))])),_:1},8,["span","style"]),r(P,{span:d(I)},{default:u((()=>[r(X,null,{default:u((()=>[r(P,null,{default:u((()=>[r(Q,{onClick:t[0]||(t[0]=e=>{O.value=!0})},{default:u((()=>[y(m(e.uploadBtn),1)])),_:1}),r(Q,{onClick:t[1]||(t[1]=e=>(K.value=0,void(M.value="")))},{default:u((()=>[y(m(e.deleteBtn),1)])),_:1}),M.value?(s(),o(Q,{key:0,onClick:t[2]||(t[2]=e=>{window.open(M.value,"_blank")})},{default:u((()=>[y("下载")])),_:1})):c("",!0)])),_:1}),r(P,null,{default:u((()=>[r(W,{size:"default",truncated:"",title:e.fileTip},{default:u((()=>[y(m(e.fileTip),1)])),_:1},8,["title"])])),_:1})])),_:1})])),_:1},8,["span"]),r(Z,{modelValue:d(O),"onUpdate:modelValue":t[3]||(t[3]=e=>v(O)?O.value=e:null),title:e.fileTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:u((()=>[r(j,{"file-type":e.fileType,onFileCancel:J,onFileSubmit:L},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{K as _};
