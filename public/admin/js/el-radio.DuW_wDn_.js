import{cg as e,d as a,a as l,M as t,_ as n,E as s,cV as o,co as i,I as d,j as c,D as u,a1 as r,c as p,e as h,ab as v,l as f,ai as m,w as g,a3 as b,n as k,Q as y,k as x,u as C,aE as N,r as E,ag as w,a2 as S,t as $,q as L,cP as T,aV as V,cp as _,b as D,h as M,b0 as H,d4 as z,c0 as F,cI as P,p as B,J as I,K as q,d5 as j,o as A,$ as K,aQ as R,cH as O,x as U,d6 as W,d7 as Z,cn as J,cK as Q,aW as G,bF as X,cr as Y,cE as ee,aG as ae,bo as le,d1 as te,W as ne,O as se,g as oe,ao as ie,az as de,cJ as ce,H as ue,ca as re,cL as pe,bY as he,P as ve,f as fe,cC as me,d8 as ge}from"./index.BRpw1nKc.js";import{E as be}from"./el-scrollbar.CSr5ETPp.js";import{E as ke}from"./el-checkbox.EDgu4e6h.js";import{b as ye,c as xe}from"./index.Dg10_69g.js";import{c as Ce,i as Ne,t as Ee,d as we}from"./el-select.5v61zF81.js";import{u as Se,c as $e}from"./el-date-picker.CSS3cjq0.js";import{a as Le,E as Te}from"./el-popper.D4W13mvh.js";import{C as Ve}from"./index.HiC8GQQr.js";import{d as _e}from"./debounce.CixRjyEa.js";var De=1/0;var Me=a({name:"NodeContent",setup:()=>({ns:l("cascader-node")}),render(){const{ns:e}=this,{node:a,panel:l}=this.$parent,{data:n,label:s}=a,{renderLabelFn:o}=l;return t("span",{class:e.e("label")},o?o({node:a,data:n}):s)}});const He=Symbol(),ze=a({name:"ElCascaderNode",components:{ElCheckbox:ke,ElRadio:ye,NodeContent:Me,ElIcon:s,Check:o,Loading:i,ArrowRight:d},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const t=c(He),n=l("cascader-node"),s=u((()=>t.isHoverMenu)),o=u((()=>t.config.multiple)),i=u((()=>t.config.checkStrictly)),d=u((()=>{var e;return null==(e=t.checkedNodes[0])?void 0:e.uid})),r=u((()=>e.node.isDisabled)),p=u((()=>e.node.isLeaf)),h=u((()=>i.value&&!p.value||!r.value)),v=u((()=>m(t.expandingNode))),f=u((()=>i.value&&t.checkedNodes.some(m))),m=a=>{var l;const{level:t,uid:n}=e.node;return(null==(l=null==a?void 0:a.pathNodes[t-1])?void 0:l.uid)===n},g=()=>{v.value||t.expandNode(e.node)},b=a=>{const{node:l}=e;a!==l.checked&&t.handleCheckChange(l,a)},k=()=>{t.lazyLoad(e.node,(()=>{p.value||g()}))},y=()=>{const{node:a}=e;h.value&&!a.loading&&(a.loaded?g():k())},x=a=>{e.node.loaded?(b(a),!i.value&&g()):k()};return{panel:t,isHoverMenu:s,multiple:o,checkStrictly:i,checkedNodeId:d,isDisabled:r,isLeaf:p,expandable:h,inExpandingPath:v,inCheckedPath:f,ns:n,handleHoverExpand:e=>{s.value&&(y(),!p.value&&a("expand",e))},handleExpand:y,handleClick:()=>{s.value&&!p.value||(!p.value||r.value||i.value||o.value?y():x(!0))},handleCheck:x,handleSelectCheck:a=>{i.value?(b(a),e.node.loaded&&g()):x(a)}}}}),Fe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Pe=x("span",null,null,-1);var Be=n(a({name:"ElCascaderMenu",components:{Loading:i,ElIcon:s,ElScrollbar:be,ElCascaderNode:n(ze,[["render",function(e,a,l,t,n,s){const o=r("el-checkbox"),i=r("el-radio"),d=r("check"),c=r("el-icon"),u=r("node-content"),x=r("loading"),C=r("arrow-right");return p(),h("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:k([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...a)=>e.handleHoverExpand&&e.handleHoverExpand(...a)),onFocus:a[3]||(a[3]=(...a)=>e.handleHoverExpand&&e.handleHoverExpand(...a)),onClick:a[4]||(a[4]=(...a)=>e.handleClick&&e.handleClick(...a))},[v(" prefix "),e.multiple?(p(),f(o,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=m((()=>{}),["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(p(),f(i,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=m((()=>{}),["stop"]))},{default:g((()=>[v("\n        Add an empty element to avoid render label,\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\n      "),Pe])),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(p(),f(c,{key:2,class:k(e.ns.e("prefix"))},{default:g((()=>[b(d)])),_:1},8,["class"])):v("v-if",!0),v(" content "),b(u),v(" postfix "),e.isLeaf?v("v-if",!0):(p(),h(y,{key:3},[e.node.loading?(p(),f(c,{key:0,class:k([e.ns.is("loading"),e.ns.e("postfix")])},{default:g((()=>[b(x)])),_:1},8,["class"])):(p(),f(c,{key:1,class:k(["arrow-right",e.ns.e("postfix")])},{default:g((()=>[b(C)])),_:1},8,["class"]))],64))],42,Fe)}],["__file","node.vue"]])},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=L(),t=l("cascader-menu"),{t:n}=C(),s=N();let o=null,i=null;const d=c(He),r=E(null),p=u((()=>!e.nodes.length)),h=u((()=>!d.initialLoaded)),v=u((()=>`${s.value}-${e.index}`)),f=()=>{i&&(clearTimeout(i),i=null)},m=()=>{r.value&&(r.value.innerHTML="",f())};return{ns:t,panel:d,hoverZone:r,isEmpty:p,isLoading:h,menuId:v,t:n,handleExpand:e=>{o=e.target},handleMouseMove:e=>{if(d.isHoverMenu&&o&&r.value)if(o.contains(e.target)){f();const l=a.vnode.el,{left:t}=l.getBoundingClientRect(),{offsetWidth:n,offsetHeight:s}=l,i=e.clientX-t,d=o.offsetTop,c=d+o.offsetHeight;r.value.innerHTML=`\n          <path style="pointer-events: auto;" fill="transparent" d="M${i} ${d} L${n} 0 V${d} Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M${i} ${c} L${n} ${s} V${c} Z" />\n        `}else i||(i=window.setTimeout(m,d.config.hoverThreshold))},clearHoverZone:m}}}),[["render",function(e,a,l,t,n,s){const o=r("el-cascader-node"),i=r("loading"),d=r("el-icon"),c=r("el-scrollbar");return p(),f(c,{key:e.menuId,tag:"ul",role:"menu",class:k(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:g((()=>{var a;return[(p(!0),h(y,null,w(e.nodes,(a=>(p(),f(o,{key:a.uid,node:a,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"])))),128)),e.isLoading?(p(),h("div",{key:0,class:k(e.ns.e("empty-text"))},[b(d,{size:"14",class:k(e.ns.is("loading"))},{default:g((()=>[b(i)])),_:1},8,["class"]),S(" "+$(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(p(),h("div",{key:1,class:k(e.ns.e("empty-text"))},$(e.t("el.cascader.noData")),3)):(null==(a=e.panel)?void 0:a.isHoverMenu)?(p(),h("svg",{key:2,ref:"hoverZone",class:k(e.ns.e("hover-zone"))},null,2)):v("v-if",!0)]})),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}],["__file","menu.vue"]]);let Ie=0;class qe{constructor(e,a,l,t=!1){this.data=e,this.config=a,this.parent=l,this.root=t,this.uid=Ie++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:n,label:s,children:o}=a,i=e[o],d=(e=>{const a=[e];let{parent:l}=e;for(;l;)a.unshift(l),l=l.parent;return a})(this);this.level=t?0:l?l.level+1:1,this.value=e[n],this.label=e[s],this.pathNodes=d,this.pathValues=d.map((e=>e.value)),this.pathLabels=d.map((e=>e.label)),this.childrenData=i,this.children=(i||[]).map((e=>new qe(e,a,this))),this.loaded=!a.lazy||this.isLeaf||!T(i)}get isDisabled(){const{data:e,parent:a,config:l}=this,{disabled:t,checkStrictly:n}=l;return(V(t)?t(e,this):!!e[t])||!n&&(null==a?void 0:a.isDisabled)}get isLeaf(){const{data:e,config:a,childrenData:l,loaded:t}=this,{lazy:n,leaf:s}=a,o=V(s)?s(e,this):e[s];return _(o)?!(n&&!t)&&!(Array.isArray(l)&&l.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:a,children:l}=this,t=new qe(e,this.config,this);return Array.isArray(a)?a.push(e):this.childrenData=[e],l.push(t),t}calcText(e,a){const l=e?this.pathLabels.join(a):this.label;return this.text=l,l}broadcast(e,...a){const l=`onParent${Ce(e)}`;this.children.forEach((t=>{t&&(t.broadcast(e,...a),t[l]&&t[l](...a))}))}emit(e,...a){const{parent:l}=this,t=`onChild${Ce(e)}`;l&&(l[t]&&l[t](...a),l.emit(e,...a))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,a=e.filter((e=>!e.isDisabled)),l=!!a.length&&a.every((e=>e.checked));this.setCheckState(l)}setCheckState(e){const a=this.children.length,l=this.children.reduce(((e,a)=>e+(a.checked?1:a.indeterminate?.5:0)),0);this.checked=this.loaded&&this.children.filter((e=>!e.isDisabled)).every((e=>e.loaded&&e.checked))&&e,this.indeterminate=this.loaded&&l!==a&&l>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:a,multiple:l}=this.config;a||!l?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}}const je=(e,a)=>e.reduce(((e,l)=>(l.isLeaf?e.push(l):(!a&&e.push(l),e=e.concat(je(l.children,a))),e)),[]);class Ae{constructor(e,a){this.config=a;const l=(e||[]).map((e=>new qe(e,this.config)));this.nodes=l,this.allNodes=je(l,!1),this.leafNodes=je(l,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,a){const l=a?a.appendChild(e):new qe(e,this.config);a||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(e,a){e.forEach((e=>this.appendNode(e,a)))}getNodeByValue(e,a=!1){if(!e&&0!==e)return null;return this.getFlattedNodes(a).find((a=>Ne(a.value,e)||Ne(a.pathValues,e)))||null}getSameNode(e){if(!e)return null;return this.getFlattedNodes(!1).find((({value:a,level:l})=>Ne(e.value,a)&&e.level===l))||null}}const Ke=D({modelValue:{type:M([Number,String,Array])},options:{type:M(Array),default:()=>[]},props:{type:M(Object),default:()=>({})}}),Re={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:H,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Oe=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])};var Ue=n(a({name:"ElCascaderPanel",components:{ElCascaderMenu:Be},props:{...Ke,border:{type:Boolean,default:!0},renderLabel:Function},emits:[F,P,"close","expand-change"],setup(a,{emit:t,slots:n}){let s=!1;const o=l("cascader"),i=(e=>u((()=>({...Re,...e.props}))))(a);let d=null;const c=E(!0),r=E([]),p=E(null),h=E([]),v=E(null),f=E([]),m=u((()=>"hover"===i.value.expandTrigger)),g=u((()=>a.renderLabel||n.default)),b=(e,a)=>{const l=i.value;(e=e||new qe({},l,void 0,!0)).loading=!0;l.lazyLoad(e,(l=>{const t=e,n=t.root?null:t;l&&(null==d||d.appendNodes(l,n)),t.loading=!1,t.loaded=!0,t.childrenData=t.childrenData||[],a&&a(l)}))},k=(e,a)=>{var l;const{level:n}=e,s=h.value.slice(0,n);let o;e.isLeaf?o=e.pathNodes[n-2]:(o=e,s.push(e.children)),(null==(l=v.value)?void 0:l.uid)!==(null==o?void 0:o.uid)&&(v.value=e,h.value=s,!a&&t("expand-change",(null==e?void 0:e.pathValues)||[]))},y=(e,a,l=!0)=>{const{checkStrictly:n,multiple:o}=i.value,d=f.value[0];s=!0,!o&&(null==d||d.doCheck(!1)),e.doCheck(a),w(),l&&!o&&!n&&t("close"),!l&&!o&&!n&&x(e)},x=e=>{e&&(e=e.parent,x(e),e&&k(e))},C=e=>null==d?void 0:d.getFlattedNodes(e),N=e=>{var a;return null==(a=C(e))?void 0:a.filter((e=>!1!==e.checked))},w=()=>{var e;const{checkStrictly:a,multiple:l}=i.value,t=((e,a)=>{const l=a.slice(0),t=l.map((e=>e.uid)),n=e.reduce(((e,a)=>{const n=t.indexOf(a.uid);return n>-1&&(e.push(a),l.splice(n,1),t.splice(n,1)),e}),[]);return n.push(...l),n})(f.value,N(!a)),n=t.map((e=>e.valueByOption));f.value=t,p.value=l?n:null!=(e=n[0])?e:null},S=(l=!1,t=!1)=>{const{modelValue:n}=a,{lazy:o,multiple:u,checkStrictly:r}=i.value,h=!r;var v;if(c.value&&!s&&(t||!Ne(n,p.value)))if(o&&!l){const a=Se(null!=(v=$e(n))&&v.length?e(v,De):[]).map((e=>null==d?void 0:d.getNodeByValue(e))).filter((e=>!!e&&!e.loaded&&!e.loading));a.length?a.forEach((e=>{b(e,(()=>S(!1,t)))})):S(!0,t)}else{const e=u?$e(n):[n],a=Se(e.map((e=>null==d?void 0:d.getNodeByValue(e,h))));$(a,t),p.value=xe(n)}},$=(e,a=!0)=>{const{checkStrictly:l}=i.value,t=f.value,n=e.filter((e=>!!e&&(l||e.isLeaf))),s=null==d?void 0:d.getSameNode(v.value),o=a&&s||n[0];o?o.pathNodes.forEach((e=>k(e,!0))):v.value=null,t.forEach((e=>e.doCheck(!1))),I(n).forEach((e=>e.doCheck(!0))),f.value=n,K(L)},L=()=>{R&&r.value.forEach((e=>{const a=null==e?void 0:e.$el;if(a){const e=a.querySelector(`.${o.namespace.value}-scrollbar__wrap`),l=a.querySelector(`.${o.b("node")}.${o.is("active")}`)||a.querySelector(`.${o.b("node")}.in-active-path`);O(e,l)}}))};return B(He,I({config:i,expandingNode:v,checkedNodes:f,isHoverMenu:m,initialLoaded:c,renderLabelFn:g,lazyLoad:b,expandNode:k,handleCheckChange:y})),q([i,()=>a.options],(()=>{const{options:e}=a,l=i.value;s=!1,d=new Ae(e,l),h.value=[d.getNodes()],l.lazy&&T(a.options)?(c.value=!1,b(void 0,(e=>{e&&(d=new Ae(e,l),h.value=[d.getNodes()]),c.value=!0,S(!1,!0)}))):S(!1,!0)}),{deep:!0,immediate:!0}),q((()=>a.modelValue),(()=>{s=!1,S()}),{deep:!0}),q((()=>p.value),(e=>{Ne(e,a.modelValue)||(t(F,e),t(P,e))})),j((()=>r.value=[])),A((()=>!T(a.modelValue)&&S())),{ns:o,menuList:r,menus:h,checkedNodes:f,handleKeyDown:e=>{const a=e.target,{code:l}=e;switch(l){case U.up:case U.down:{e.preventDefault();const t=l===U.up?-1:1;W(Z(a,t,`.${o.b("node")}[tabindex="-1"]`));break}case U.left:{e.preventDefault();const l=r.value[Oe(a)-1],t=null==l?void 0:l.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);W(t);break}case U.right:{e.preventDefault();const l=r.value[Oe(a)+1],t=null==l?void 0:l.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);W(t);break}case U.enter:(e=>{if(!e)return;const a=e.querySelector("input");a?a.click():z(e)&&e.click()})(a)}},handleCheckChange:y,getFlattedNodes:C,getCheckedNodes:N,clearCheckedNodes:()=>{f.value.forEach((e=>e.doCheck(!1))),w(),h.value=h.value.slice(0,1),v.value=null,t("expand-change",[])},calculateCheckedValue:w,scrollToExpandingNode:L}}}),[["render",function(e,a,l,t,n,s){const o=r("el-cascader-menu");return p(),h("div",{class:k([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...a)=>e.handleKeyDown&&e.handleKeyDown(...a))},[(p(!0),h(y,null,w(e.menus,((a,l)=>(p(),f(o,{key:l,ref_for:!0,ref:a=>e.menuList[l]=a,index:l,nodes:[...a]},null,8,["index","nodes"])))),128))],34)}],["__file","index.vue"]]);Ue.install=e=>{e.component(Ue.name,Ue)};const We=Ue,Ze=D({...Ke,size:J,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:M(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:M(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Le.teleported,tagType:{...Ee.type,default:"info"},validateEvent:{type:Boolean,default:!0},...Q}),Je={[F]:e=>!0,[P]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>G(e),expandChange:e=>!!e,removeTag:e=>!!e},Qe={key:0},Ge=["placeholder","onKeydown"],Xe=["onClick"],Ye=a({name:"ElCascader"});var ea=n(a({...Ye,props:Ze,emits:Je,setup(e,{expose:a,emit:t}){const n=e,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:l}=e;["right","left","bottom","top"].includes(l)||(a.arrow.x=35)},requires:["arrow"]}]},d=X();let c=0,r=0;const N=l("cascader"),S=l("input"),{t:L}=C(),{form:T,formItem:V}=Y(),{valueOnClear:_}=ee(n),D=E(null),M=E(null),H=E(null),z=E(null),B=E(null),I=E(!1),j=E(!1),O=E(!1),J=E(!1),Q=E(""),G=E(""),ke=E([]),ye=E([]),Ce=E([]),Ne=E(!1),Ee=u((()=>d.style)),Se=u((()=>n.disabled||(null==T?void 0:T.disabled))),$e=u((()=>n.placeholder||L("el.cascader.placeholder"))),Le=u((()=>G.value||ke.value.length>0||Ne.value?"":$e.value)),De=ae(),Me=u((()=>["small"].includes(De.value)?"small":"default")),He=u((()=>!!n.props.multiple)),ze=u((()=>!n.filterable||He.value)),Fe=u((()=>He.value?G.value:Q.value)),Pe=u((()=>{var e;return(null==(e=z.value)?void 0:e.checkedNodes)||[]})),Be=u((()=>!(!n.clearable||Se.value||O.value||!j.value)&&!!Pe.value.length)),Ie=u((()=>{const{showAllLevels:e,separator:a}=n,l=Pe.value;return l.length?He.value?"":l[0].calcText(e,a):""})),qe=u((()=>(null==V?void 0:V.validateState)||"")),je=u({get:()=>xe(n.modelValue),set(e){const a=e||_.value;t(F,a),t(P,a),n.validateEvent&&(null==V||V.validate("change").catch((e=>le())))}}),Ae=u((()=>[N.b(),N.m(De.value),N.is("disabled",Se.value),d.class])),Ke=u((()=>[S.e("icon"),"icon-arrow-down",N.is("reverse",I.value)])),Re=u((()=>N.is("focus",I.value||J.value))),Oe=u((()=>{var e,a;return null==(a=null==(e=D.value)?void 0:e.popperRef)?void 0:a.contentRef})),Ue=e=>{var a,l,s;Se.value||(e=null!=e?e:!I.value)!==I.value&&(I.value=e,null==(l=null==(a=M.value)?void 0:a.input)||l.setAttribute("aria-expanded",`${e}`),e?(Ze(),K(null==(s=z.value)?void 0:s.scrollToExpandingNode)):n.filterable&&da(),t("visibleChange",e))},Ze=()=>{K((()=>{var e;null==(e=D.value)||e.updatePopper()}))},Je=()=>{O.value=!1},Ye=e=>{const{showAllLevels:a,separator:l}=n;return{node:e,key:e.uid,text:e.calcText(a,l),hitState:!1,closable:!Se.value&&!e.isDisabled,isCollapseTag:!1}},ea=e=>{var a;const l=e.node;l.doCheck(!1),null==(a=z.value)||a.calculateCheckedValue(),t("removeTag",l.valueByOption)},aa=()=>{var e,a;const{filterMethod:l,showAllLevels:t,separator:s}=n,o=null==(a=null==(e=z.value)?void 0:e.getFlattedNodes(!n.props.checkStrictly))?void 0:a.filter((e=>!e.isDisabled&&(e.calcText(t,s),l(e,Fe.value))));He.value&&(ke.value.forEach((e=>{e.hitState=!1})),ye.value.forEach((e=>{e.hitState=!1}))),O.value=!0,Ce.value=o,Ze()},la=()=>{var e;let a;a=O.value&&B.value?B.value.$el.querySelector(`.${N.e("suggestion-item")}`):null==(e=z.value)?void 0:e.$el.querySelector(`.${N.b("node")}[tabindex="-1"]`),a&&(a.focus(),!O.value&&a.click())},ta=()=>{var e,a;const l=null==(e=M.value)?void 0:e.input,t=H.value,n=null==(a=B.value)?void 0:a.$el;if(R&&l){if(n){n.querySelector(`.${N.e("suggestion-list")}`).style.minWidth=`${l.offsetWidth}px`}if(t){const{offsetHeight:e}=t,a=ke.value.length>0?`${Math.max(e+6,c)}px`:`${c}px`;l.style.height=a,Ze()}}},na=e=>{Ze(),t("expandChange",e)},sa=e=>{var a;const l=null==(a=e.target)?void 0:a.value;if("compositionend"===e.type)Ne.value=!1,K((()=>va(l)));else{const e=l[l.length-1]||"";Ne.value=!me(e)}},oa=e=>{if(!Ne.value)switch(e.code){case U.enter:Ue();break;case U.down:Ue(!0),K(la),e.preventDefault();break;case U.esc:!0===I.value&&(e.preventDefault(),e.stopPropagation(),Ue(!1));break;case U.tab:Ue(!1)}},ia=()=>{var e;null==(e=z.value)||e.clearCheckedNodes(),!I.value&&n.filterable&&da(),Ue(!1)},da=()=>{const{value:e}=Ie;Q.value=e,G.value=e},ca=e=>{const a=e.target,{code:l}=e;switch(l){case U.up:case U.down:{const e=l===U.up?-1:1;W(Z(a,e,`.${N.e("suggestion-item")}[tabindex="-1"]`));break}case U.enter:a.click()}},ua=()=>{const e=ke.value,a=e[e.length-1];r=G.value?0:r+1,!a||!r||n.collapseTags&&e.length>1||(a.hitState?ea(a):a.hitState=!0)},ra=e=>{const a=e.target,l=N.e("search-input");a.className===l&&(J.value=!0),t("focus",e)},pa=e=>{J.value=!1,t("blur",e)},ha=_e((()=>{const{value:e}=Fe;if(!e)return;const a=n.beforeFilter(e);te(a)?a.then(aa).catch((()=>{})):!1!==a?aa():Je()}),n.debounce),va=(e,a)=>{!I.value&&Ue(!0),(null==a?void 0:a.isComposing)||(e?ha():Je())},fa=e=>Number.parseFloat(ge(S.cssVarName("input-height"),e).value)-2;return q(O,Ze),q([Pe,Se],(()=>{if(!He.value)return;const e=Pe.value,a=[],l=[];if(e.forEach((e=>l.push(Ye(e)))),ye.value=l,e.length){e.slice(0,n.maxCollapseTags).forEach((e=>a.push(Ye(e))));const l=e.slice(n.maxCollapseTags),t=l.length;t&&(n.collapseTags?a.push({key:-1,text:`+ ${t}`,closable:!1,isCollapseTag:!0}):l.forEach((e=>a.push(Ye(e)))))}ke.value=a})),q(ke,(()=>{K((()=>ta()))})),q(De,(async()=>{await K();const e=M.value.input;c=fa(e)||c,ta()})),q(Ie,da,{immediate:!0}),A((()=>{const e=M.value.input,a=fa(e);c=e.offsetHeight||a,ne(e,ta)})),a({getCheckedNodes:e=>{var a;return null==(a=z.value)?void 0:a.getCheckedNodes(e)},cascaderPanelRef:z,togglePopperVisible:Ue,contentRef:Oe}),(e,a)=>(p(),f(oe(Te),{ref_key:"tooltipRef",ref:D,visible:I.value,teleported:e.teleported,"popper-class":[oe(N).e("dropdown"),e.popperClass],"popper-options":i,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${oe(N).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Je},{default:g((()=>[se((p(),h("div",{class:k(oe(Ae)),style:ie(oe(Ee)),onClick:a[5]||(a[5]=()=>Ue(!oe(ze)||void 0)),onKeydown:oa,onMouseenter:a[6]||(a[6]=e=>j.value=!0),onMouseleave:a[7]||(a[7]=e=>j.value=!1)},[b(oe(de),{ref_key:"input",ref:M,modelValue:Q.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.value=e),placeholder:oe(Le),readonly:oe(ze),disabled:oe(Se),"validate-event":!1,size:oe(De),class:k(oe(Re)),tabindex:oe(He)&&e.filterable&&!oe(Se)?-1:void 0,onCompositionstart:sa,onCompositionupdate:sa,onCompositionend:sa,onFocus:ra,onBlur:pa,onInput:va},{suffix:g((()=>[oe(Be)?(p(),f(oe(s),{key:"clear",class:k([oe(S).e("icon"),"icon-circle-close"]),onClick:m(ia,["stop"])},{default:g((()=>[b(oe(ce))])),_:1},8,["class","onClick"])):(p(),f(oe(s),{key:"arrow-down",class:k(oe(Ke)),onClick:a[0]||(a[0]=m((e=>Ue()),["stop"]))},{default:g((()=>[b(oe(ue))])),_:1},8,["class"]))])),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),oe(He)?(p(),h("div",{key:0,ref_key:"tagWrapper",ref:H,class:k([oe(N).e("tags"),oe(N).is("validate",Boolean(oe(qe)))])},[(p(!0),h(y,null,w(ke.value,(a=>(p(),f(oe(we),{key:a.key,type:e.tagType,size:oe(Me),hit:a.hitState,closable:a.closable,"disable-transitions":"",onClose:e=>ea(a)},{default:g((()=>[!1===a.isCollapseTag?(p(),h("span",Qe,$(a.text),1)):(p(),f(oe(Te),{key:1,disabled:I.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:g((()=>[x("span",null,$(a.text),1)])),content:g((()=>[x("div",{class:k(oe(N).e("collapse-tags"))},[(p(!0),h(y,null,w(ye.value.slice(e.maxCollapseTags),((a,l)=>(p(),h("div",{key:l,class:k(oe(N).e("collapse-tag"))},[(p(),f(oe(we),{key:a.key,class:"in-tooltip",type:e.tagType,size:oe(Me),hit:a.hitState,closable:a.closable,"disable-transitions":"",onClose:e=>ea(a)},{default:g((()=>[x("span",null,$(a.text),1)])),_:2},1032,["type","size","hit","closable","onClose"]))],2)))),128))],2)])),_:2},1032,["disabled"]))])),_:2},1032,["type","size","hit","closable","onClose"])))),128)),e.filterable&&!oe(Se)?se((p(),h("input",{key:0,"onUpdate:modelValue":a[2]||(a[2]=e=>G.value=e),type:"text",class:k(oe(N).e("search-input")),placeholder:oe(Ie)?"":oe($e),onInput:a[3]||(a[3]=e=>va(G.value,e)),onClick:a[4]||(a[4]=m((e=>Ue(!0)),["stop"])),onKeydown:re(ua,["delete"]),onCompositionstart:sa,onCompositionupdate:sa,onCompositionend:sa,onFocus:ra,onBlur:pa},null,42,Ge)),[[pe,G.value]]):v("v-if",!0)],2)):v("v-if",!0)],38)),[[oe(Ve),()=>Ue(!1),oe(Oe)]])])),content:g((()=>[se(b(oe(We),{ref_key:"cascaderPanelRef",ref:z,modelValue:oe(je),"onUpdate:modelValue":a[8]||(a[8]=e=>he(je)?je.value=e:null),options:e.options,props:n.props,border:!1,"render-label":e.$slots.default,onExpandChange:na,onClose:a[9]||(a[9]=a=>e.$nextTick((()=>Ue(!1))))},null,8,["modelValue","options","props","render-label"]),[[ve,!O.value]]),e.filterable?se((p(),f(oe(be),{key:0,ref_key:"suggestionPanel",ref:B,tag:"ul",class:k(oe(N).e("suggestion-panel")),"view-class":oe(N).e("suggestion-list"),onKeydown:ca},{default:g((()=>[Ce.value.length?(p(!0),h(y,{key:0},w(Ce.value,(e=>(p(),h("li",{key:e.uid,class:k([oe(N).e("suggestion-item"),oe(N).is("checked",e.checked)]),tabindex:-1,onClick:a=>(e=>{var a,l;const{checked:t}=e;He.value?null==(a=z.value)||a.handleCheckChange(e,!t,!1):(!t&&(null==(l=z.value)||l.handleCheckChange(e,!0,!1)),Ue(!1))})(e)},[x("span",null,$(e.text),1),e.checked?(p(),f(oe(s),{key:0},{default:g((()=>[b(oe(o))])),_:1})):v("v-if",!0)],10,Xe)))),128)):fe(e.$slots,"empty",{key:1},(()=>[x("li",{class:k(oe(N).e("empty-text"))},$(oe(L)("el.cascader.noMatch")),3)]))])),_:3},8,["class","view-class"])),[[ve,O.value]]):v("v-if",!0)])),_:3},8,["visible","teleported","popper-class","transition"]))}}),[["__file","cascader.vue"]]);ea.install=e=>{e.component(ea.name,ea)};const aa=ea;export{aa as E};
